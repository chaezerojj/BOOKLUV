<template>
  <div class="ai-test">

    <form class="test-container" @submit.prevent="onSubmit">
      <h1>ğŸ” AI ì·¨í–¥ ì„¤ë¬¸ì¡°ì‚¬</h1>
      <!-- q1 -->
      <div class="q">
        <label class="q-label">1. ì±…ì„ ì½ëŠ” ê°€ì¥ í° ëª©ì ì€?</label>
        <div class="options">
          <label class="opt">
            <input type="radio" name="q1" value="A" v-model="answers.q1" required />
            <span> ì¬ë¯¸ìˆê²Œ ëª°ì…í•˜ê³  ì‹¶ì–´ì„œ</span>
          </label>
          <label class="opt">
            <input type="radio" name="q1" value="B" v-model="answers.q1" />
            <span> ìƒê°ì˜ í­ì„ ë„“íˆê³  ì‹¶ì–´ì„œ</span>
          </label>
          <label class="opt">
            <input type="radio" name="q1" value="C" v-model="answers.q1" />
            <span> í˜„ì‹¤ì— ë°”ë¡œ ì¨ë¨¹ì„ ì¸ì‚¬ì´íŠ¸</span>
          </label>
          <label class="opt">
            <input type="radio" name="q1" value="D" v-model="answers.q1" />
            <span> ìœ„ë¡œë‚˜ ê³µê°ì„ ë°›ê³  ì‹¶ì–´ì„œ</span>
          </label>
        </div>
      </div>

      <!-- q2 -->
      <div class="q">
        <label class="q-label">2. ë” ëŒë¦¬ëŠ” ì±…ì€?</label>
        <div class="options">
          <label class="opt">
            <input type="radio" name="q2" value="A" v-model="answers.q2" required />
            <span> ìš”ì¦˜ ë§ì´ íšŒìë˜ëŠ” ì‹ ê°„</span>
          </label>
          <label class="opt">
            <input type="radio" name="q2" value="B" v-model="answers.q2" />
            <span> ì‹œê°„ì´ ì§€ë‚˜ë„ ì½íˆëŠ” ê³ ì „</span>
          </label>
          <label class="opt">
            <input type="radio" name="q2" value="C" v-model="answers.q2" />
            <span> ì‹ ê°„ì´ë“  ê³ ì „ì´ë“  ìƒê´€ì—†ë‹¤</span>
          </label>
        </div>
      </div>

      <!-- q3 -->
      <div class="q">
        <label class="q-label">3. ì±…ì„ ê³ ë¥¼ ë•Œ ê°€ì¥ ë¨¼ì € ë³´ëŠ” ê±´?</label>
        <div class="options">
          <label class="opt">
            <input type="radio" name="q3" value="A" v-model="answers.q3" required />
            <span> ì¤„ê±°ë¦¬ì™€ ì†Œì¬</span>
          </label>
          <label class="opt">
            <input type="radio" name="q3" value="B" v-model="answers.q3" />
            <span> ì£¼ì œì™€ ë©”ì‹œì§€</span>
          </label>
          <label class="opt">
            <input type="radio" name="q3" value="C" v-model="answers.q3" />
            <span> ì¶”ì²œÂ·í‰ì </span>
          </label>
          <label class="opt">
            <input type="radio" name="q3" value="D" v-model="answers.q3" />
            <span> ì €ì</span>
          </label>
        </div>
      </div>

      <!-- q4 -->
      <div class="q">
        <label class="q-label">4. ê°€ì¥ ì„ í˜¸í•˜ëŠ” ì¥ë¥´ëŠ”?</label>
        <div class="options">
          <label class="opt">
            <input type="radio" name="q4" value="novel" v-model="answers.q4" required />
            <span> ì†Œì„¤</span>
          </label>
          <label class="opt">
            <input type="radio" name="q4" value="essay" v-model="answers.q4" />
            <span> ì—ì„¸ì´</span>
          </label>
          <label class="opt">
            <input type="radio" name="q4" value="self_help" v-model="answers.q4" />
            <span> ìê¸°ê³„ë°œ</span>
          </label>
          <label class="opt">
            <input type="radio" name="q4" value="humanities" v-model="answers.q4" />
            <span> ì¸ë¬¸í•™</span>
          </label>
          <label class="opt">
            <input type="radio" name="q4" value="art" v-model="answers.q4" />
            <span> ì˜ˆìˆ </span>
          </label>
        </div>
      </div>

      <!-- q5 -->
      <div class="q">
        <label class="q-label">5. ì±…ì˜ ë¶„ìœ„ê¸°ëŠ” ì–´ë–¤ ê²Œ ì¢‹ì•„?</label>
        <div class="options">
          <label class="opt">
            <input type="radio" name="q5" value="A" v-model="answers.q5" required />
            <span> ë”°ëœ»í•˜ê³  í¸ì•ˆí•œ</span>
          </label>
          <label class="opt">
            <input type="radio" name="q5" value="B" v-model="answers.q5" />
            <span> í˜„ì‹¤ì ì´ê³  ë‚ ì¹´ë¡œìš´</span>
          </label>
          <label class="opt">
            <input type="radio" name="q5" value="C" v-model="answers.q5" />
            <span> ë¬µì§í•˜ê³  ê¹Šì€</span>
          </label>
          <label class="opt">
            <input type="radio" name="q5" value="D" v-model="answers.q5" />
            <span> ê°€ë³ê³  ìœ ì¾Œí•œ</span>
          </label>
        </div>
      </div>

      <!-- q6 -->
      <div class="q">
        <label class="q-label">6. ì½ì„ ë•Œ ë” ì¤‘ìš”í•œ ìš”ì†ŒëŠ”?</label>
        <div class="options">
          <label class="opt">
            <input type="radio" name="q6" value="A" v-model="answers.q6" required />
            <span> ìŠ¤í† ë¦¬ ì „ê°œì™€ ëª°ì…ê°</span>
          </label>
          <label class="opt">
            <input type="radio" name="q6" value="B" v-model="answers.q6" />
            <span> ë¬¸ì¥ê³¼ í‘œí˜„ì˜ ì•„ë¦„ë‹¤ì›€</span>
          </label>
          <label class="opt">
            <input type="radio" name="q6" value="C" v-model="answers.q6" />
            <span> ë°°ìš¸ ì ê³¼ ì •ë¦¬ëœ êµ¬ì¡°</span>
          </label>
          <label class="opt">
            <input type="radio" name="q6" value="D" v-model="answers.q6" />
            <span> ê°ì •ì„ ê³¼ ê³µê°</span>
          </label>
        </div>
      </div>

      <!-- q7 -->
      <div class="q">
        <label class="q-label">7. ì±… í•œ ê¶Œ ë¶„ëŸ‰ì— ëŒ€í•œ ì„ í˜¸ëŠ”?</label>
        <div class="options">
          <label class="opt">
            <input type="radio" name="q7" value="A" v-model="answers.q7" required />
            <span> ì§§ê³  ë¹ ë¥´ê²Œ ì½íˆëŠ” ì±…</span>
          </label>
          <label class="opt">
            <input type="radio" name="q7" value="B" v-model="answers.q7" />
            <span> ì ë‹¹í•œ ë¶„ëŸ‰ì´ë©´ ì¢‹ë‹¤</span>
          </label>
          <label class="opt">
            <input type="radio" name="q7" value="C" v-model="answers.q7" />
            <span> ê¸¸ì–´ë„ ì™„ì„±ë„ ìˆìœ¼ë©´ OK</span>
          </label>
        </div>
      </div>

      <!-- q8 -->
      <div class="q">
        <label class="q-label">8. ë…ì„œ ìŠ¤íƒ€ì¼ì€?</label>
        <div class="options">
          <label class="opt">
            <input type="radio" name="q8" value="A" v-model="answers.q8" required />
            <span> í•œ ë²ˆ ì‹œì‘í•˜ë©´ ëª°ì•„ì„œ ì½ëŠ”ë‹¤</span>
          </label>
          <label class="opt">
            <input type="radio" name="q8" value="B" v-model="answers.q8" />
            <span> í‹ˆí‹ˆì´ ë‚˜ëˆ  ì½ëŠ”ë‹¤</span>
          </label>
          <label class="opt">
            <input type="radio" name="q8" value="C" v-model="answers.q8" />
            <span> í•„ìš”í•œ ë¶€ë¶„ë§Œ ê³¨ë¼ ì½ëŠ”ë‹¤</span>
          </label>
        </div>
      </div>

      <!-- q9 -->
      <div class="q">
        <label class="q-label">9. ì±…ì„ ë‹¤ ì½ê³  ë‚˜ë©´ ë³´í†µ?</label>
        <div class="options">
          <label class="opt">
            <input type="radio" name="q9" value="A" v-model="answers.q9" required />
            <span> ì—¬ìš´ì´ ë‚¨ëŠ” ê²Œ ì¢‹ë‹¤</span>
          </label>
          <label class="opt">
            <input type="radio" name="q9" value="B" v-model="answers.q9" />
            <span> ìƒê°ì„ ì •ë¦¬í•˜ê²Œ ëœë‹¤</span>
          </label>
          <label class="opt">
            <input type="radio" name="q9" value="C" v-model="answers.q9" />
            <span> ì‹¤ì²œí•´ë³´ê³  ì‹¶ì–´ì§„ë‹¤</span>
          </label>
          <label class="opt">
            <input type="radio" name="q9" value="D" v-model="answers.q9" />
            <span> ë°”ë¡œ ë‹¤ìŒ ì±…ì„ ì°¾ëŠ”ë‹¤</span>
          </label>
        </div>
      </div>

      <!-- q10 -->
      <div class="q">
        <label class="q-label">10. ì§€ê¸ˆ ë‚˜ì—ê²Œ ë” í•„ìš”í•œ ì±…ì€?</label>
        <div class="options">
          <label class="opt">
            <input type="radio" name="q10" value="A" v-model="answers.q10" required />
            <span> ë§ˆìŒì„ ê°€ë³ê²Œ í•´ì£¼ëŠ” ì±…</span>
          </label>
          <label class="opt">
            <input type="radio" name="q10" value="B" v-model="answers.q10" />
            <span> ìƒê°í•  ê±°ë¦¬ë¥¼ ë˜ì§€ëŠ” ì±…</span>
          </label>
          <label class="opt">
            <input type="radio" name="q10" value="C" v-model="answers.q10" />
            <span> í˜„ì‹¤ì— ë„ì›€ ë˜ëŠ” ì±…</span>
          </label>
          <label class="opt">
            <input type="radio" name="q10" value="D" v-model="answers.q10" />
            <span> ìƒˆë¡œìš´ ì„¸ê³„ë¥¼ ë³´ì—¬ì£¼ëŠ” ì±…</span>
          </label>
        </div>
      </div>

      <button class="submit" type="submit" :disabled="store.loading">
        {{ store.loading ? "ë¶„ì„ ì¤‘..." : "í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë³´ê¸°" }}
      </button>

      <p v-if="store.error" class="err">ì—ëŸ¬ê°€ ë°œìƒí–ˆì–´ìš”. ì½˜ì†”ì„ í™•ì¸í•´ ì£¼ì„¸ìš”.</p>
    </form>
  </div>
</template>

<script setup>
import { computed } from "vue";
import { useRouter } from "vue-router";
import { useAiRecommendStore } from "@/stores/aiRecommend";

const router = useRouter();
const store = useAiRecommendStore();
const answers = computed(() => store.answers);

const onSubmit = async () => {
  try {
    await store.submitQuiz();
    router.push({ name: "ai-result" });
  } catch (e) {
    console.error(e);
  }
};
</script>

<style scoped>
.ai-test {
  margin: 1rem auto;
  padding: 2rem;
  text-align: center;
}

.test-container {
  background-color: #fefefe;
  width: 1000px;
  margin: 0 auto;
  display: grid;
  gap: 14px;
  text-align: center;
  margin: 0 auto;
  margin-top: 3rem;
  padding: 2rem;
  padding-top: 3.5rem;
  box-shadow: 0px 0px 8px rgba(161, 161, 161, 0.1);
  border-radius: 5px;
}

.test-container h1 {
  text-align: center;
  padding: 1rem;
  padding-bottom: 3rem;
}

.q {
  text-align: center;
  padding: 2rem 6rem;
  padding-bottom: 4.5rem;
  /* background-color: #fff; */
}

.q label {
  display: block;
  font-weight: 700;
  margin-bottom: 6px;
}

.q-label {
  font-size: 24px;
  padding-bottom: 2.5rem;
  letter-spacing: -0.05rem;
}

.options {
  display: grid;
  gap: 10px;
}

.opt {
  letter-spacing: -0.03rem;
  margin: 0 auto;
  background-color: #ebebeb;
  width: 300px;
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 15px 12px;
  border-radius: 12px;
  cursor: pointer;
  user-select: none;
  text-align: left;
  justify-content: center;
}

.opt input {
  margin: 0 1rem;
  width: 18px;
  height: 18px;
}

.opt span {
  padding: 0.1rem;
}

.submit {
  justify-self: center;
  margin-top: 12px;
  width: 330px;
  height: 60px;
  border-radius: 12px;
  border: 1px solid #ddd;
  background: #fff;
  font-weight: 600;
  cursor: pointer;
  font-size: 19px;
  letter-spacing: -0.06rem;
}

.err {
  color: #d33;
  font-weight: 700;
}
</style>
