<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>카카오 로그인</title>
</head>
<body>
    <h1>카카오 로그인 테스트</h1>

    <!-- 카카오 로그인 버튼 -->
    <button id="kakao-login-btn">카카오톡 로그인하기</button>

    <script>
    const REST_API_KEY = "{{ KAKAO_REST_API_KEY }}";
    const REDIRECT_URI = "{{ KAKAO_REDIRECT_URI }}";
    let NEXT = "{{ next }}";

    // 상대 경로를 절대 URL로 변환
    if (NEXT && NEXT.startsWith("/")) {
        NEXT = "http://192.168.202.130:8000" + NEXT;
    }

    let kakaoAuthURL = `https://kauth.kakao.com/oauth/authorize?response_type=code&client_id=${REST_API_KEY}&redirect_uri=${REDIRECT_URI}`;
    if (NEXT) {
        kakaoAuthURL += `&state=${encodeURIComponent(NEXT)}`;
    }

    document.getElementById("kakao-login-btn").addEventListener("click", () => {
        window.location.href = kakaoAuthURL;
    });
</script>
</body>
</html>
